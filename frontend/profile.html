<!DOCTYPE html>
<html>
<head><title>Profil</title></head>
<body>
  <h2>Profil Sayfası</h2>
  <p id="username_label"></p>
  <h3>Test Geçmişi</h3>
  <div id="history"></div>
  <br>
  <button onclick="logout()">Çıkış Yap</button>

  <script>
    const username = localStorage.getItem("username");
    document.getElementById("username_label").innerText = `Kullanıcı: ${username}`;

    fetch(`http://127.0.0.1:5000/api/tests/${username}`)
      .then(res => res.json())
      .then(data => {
        let html = "";
        data.forEach(entry => {
          html += `<p>${entry.result} - ${entry.score} puan</p>`;
        });
        document.getElementById("history").innerHTML = html;
      });

    function logout() {
      localStorage.removeItem("username");
      window.location.href = "login.html";
    }
  </script>
</body>
</html>
